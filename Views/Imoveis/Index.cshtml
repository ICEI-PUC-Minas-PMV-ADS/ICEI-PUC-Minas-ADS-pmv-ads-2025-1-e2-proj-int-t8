@model IEnumerable<LanceCertoSQL.Models.Imovel>

@{
    ViewData["Title"] = "Lista de Imóveis";
}

<div class="container mt-4">
    <h2 class="mb-3"><i class="bi bi-building me-2"></i>Lista de Imóveis</h2>

    <a asp-action="Create" class="btn btn-success mb-3">
        <i class="bi bi-plus-circle me-1"></i>Cadastrar Novo Imóvel
    </a>
    <a asp-action="BuscarImoveis" class="btn btn-primary mb-3 ms-2">
        <i class="bi bi-search me-1"></i>Buscar Imóveis
    </a>


    <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle text-center bg-white shadow-sm">
            <thead class="table-dark">
                <tr>
                    <th>Foto</th>
                    <th>Nome do Imóvel</th>
                    <th>Cidade</th>
                    <th>Valor Estimado</th>
                    <th>Usuário</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td style="width: 140px;">
                            <img src="@(string.IsNullOrEmpty(item.Foto) ? "/img/no-image.png" : item.Foto)"
                                 alt="Foto do Imóvel"
                                 class="img-thumbnail"
                                 style="height: 80px; object-fit: cover;" />
                        </td>
                        <td>@item.Nome</td>
                        <td>@item.Cidade</td>
                        <td>@item.ValorEstimado.ToString("C")</td>
                        <td>@item.Usuario?.Email</td>
                        <td>
                            <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-sm btn-warning me-1">
                                <i class="bi bi-pencil"></i>
                            </a>
                            <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-sm btn-info me-1 text-white">
                                <i class="bi bi-eye"></i>
                            </a>
                            <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-sm btn-danger">
                                <i class="bi bi-trash"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
